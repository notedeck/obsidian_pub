---
created: 2025-05-12T22:00
updated: 2025-05-19T03:52
tags:
  - oracle
---
NVL
NVL2
型
引数
戻り値


CASE
DECODE
条件

COALESCE
型
引数
戻り値

| 関数名        | 引数の数 | 引数の型の注意点                                         | 戻り値の型の決定                   | NULL判定の対象 | 備考                                        |
| ---------- | ---- | ------------------------------------------------ | -------------------------- | --------- | ----------------------------------------- |
| `NVL`      | 2    | **両引数のデータ型を同じにする必要あり**（型変換不可）                    | 第1引数の型                     | 第1引数      | 第1引数がNULLなら第2引数を返す。型不一致だとエラー。             |
| `NVL2`     | 3    | 第2引数・第3引数は**同じ型が望ましい**が、Oracleが暗黙変換する場合もあり       | 第2引数または第3引数の型（NULLかどうかで分岐） | 第1引数      | 第1引数がNULLでなければ第2引数を、NULLなら第3引数を返す。        |
| `COALESCE` | 2以上  | **全引数の型を同じにする必要あり**（Oracleが暗黙変換する場合もあり）(NULL,数値) | 最初にNULLでない値の型              | 左から順に判定   | 最初にNULLでない値を返す。引数がすべてNULLならNULLを返す。SQL標準。 |


| 書き方                        | 判定式              | NULL対応       |
| -------------------------- | ---------------- | ------------ |
| `CASE salary WHEN NULL`    | `salary = NULL`  | NG（常にマッチしない） |
| `CASE WHEN salary IS NULL` | `salary IS NULL` | OK（期待通りに動作）  |


| 関数名      | 条件の記述                            | 引数の数                                  | 引数の型の注意点                                         | 戻り値の型                                   | NULLの扱い                                                                           | 備考                                            |
| -------- | -------------------------------- | ------------------------------------- | ------------------------------------------------ | --------------------------------------- | --------------------------------------------------------------------------------- | --------------------------------------------- |
| `CASE`   | **柔軟な論理式（比較演算子・BETWEEN・LIKEなど）** | 2以上（WHEN/THEN単位で）                     | 各`THEN`と`ELSE`の値は**同じ型が望ましい**（Oracleが暗黙変換する場合あり） | `THEN`/`ELSE`の型                         | WHEN句の条件式でNULLの可能性を考慮                                                             | **SQL標準**。`CASE WHEN 条件 THEN 値`形式。複雑な条件に対応可能。 |
| `DECODE` | **等価比較（=`のみ）**                   | 3以上（DECODE(比較値, 値1, 結果1, ..., デフォルト)） | 比較値・各値・戻り値は**同じ型が望ましい**（Oracleが暗黙変換する場合あり）       | 第1個目の戻り値の型が採用され、それに他の戻り値が合わせられる（暗黙変換含む） | NULLは`=`での比較のため、`NULL = NULL` は `FALSE` ではなく `UNKNOWN` となり、`DECODE` の等値比較では一致しない。 | Oracle独自。シンプルな値のマッチングには便利。IF-ELSE的に使える。       |

